{% extends 'base.html' %} {% block title %} Pago y Envío {% endblock %} {% block
body %}
<div class="container my-5">
  <h1 class="text-center mb-5 display-4 text-primary">Proceso de Pago</h1>

  <div class="row">
    <div class="col-md-7">
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-dark text-white">
          <h5 class="mb-0">1. Información de Envío</h5>
        </div>
        <div class="card-body">
          <form id="formPago">
            <div class="mb-3">
              <label for="nombreCompleto" class="form-label"
                >Nombre Completo</label
              >
              <input
                type="text"
                class="form-control"
                id="nombreCompleto"
                required
              />
            </div>
            <div class="mb-3">
              <label for="direccion" class="form-label"
                >Dirección Completa</label
              >
              <input
                type="text"
                class="form-control"
                id="direccion"
                placeholder="Calle, número, apto/oficina"
                required
              />
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="ciudad" class="form-label">Ciudad</label>
                <input type="text" class="form-control" id="ciudad" required />
              </div>
              <div class="col-md-6 mb-3">
                <label for="codigoPostal" class="form-label"
                  >Código Postal</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="codigoPostal"
                  required
                />
              </div>
            </div>
          </form>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-header bg-dark text-white">
          <h5 class="mb-0">2. Método de Pago</h5>
        </div>
        <div class="card-body">
          <form>
            <div class="mb-3">
              <label for="tarjetaNumero" class="form-label"
                >Número de Tarjeta</label
              >
              <input
                type="text"
                class="form-control"
                id="tarjetaNumero"
                placeholder="XXXX XXXX XXXX XXXX"
                required
              />
            </div>
            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="expiracion" class="form-label"
                  >Vencimiento (MM/AA)</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="expiracion"
                  placeholder="01/25"
                  required
                />
              </div>
              <div class="col-md-4 mb-3">
                <label for="cvv" class="form-label">CVV</label>
                <input
                  type="text"
                  class="form-control"
                  id="cvv"
                  placeholder="123"
                  required
                />
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col-md-5">
      <div class="card bg-light shadow-sm sticky-top" style="top: 15px">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0">Resumen de tu Pedido</h5>
        </div>
        <div class="card-body">
          <ul class="list-group list-group-flush mb-3">
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Producto A (x1)
              <span class="fw-bold">$50.00</span>
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Producto B (x2)
              <span class="fw-bold">$30.00</span>
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center bg-light text-success"
            >
              **Subtotal**
              <span class="fw-bold">$80.00</span>
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Costo de Envío
              <span class="fw-bold text-danger">$10.00</span>
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center bg-success text-white"
            >
              <h4 class="mb-0">Total a Pagar</h4>
              <h4 class="mb-0">$90.00</h4>
            </li>
          </ul>

          <button
            type="button"
            id="confirmarPagoBtn"
            class="btn btn-success btn-lg w-100 mt-3"
          >
            <i class="fas fa-lock me-2"></i> Confirmar y Pagar $90.00
          </button>

          <p class="text-center mt-3 text-muted small">
            Al hacer clic en "Confirmar y Pagar", aceptas nuestros términos y
            condiciones.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document
    .getElementById("confirmarPagoBtn")
    .addEventListener("click", function () {
      // Validación básica (puedes añadir más si es necesario)
      const form = document.getElementById("formPago");
      if (form.checkValidity() === false) {
        form.reportValidity(); // Muestra los mensajes de validación HTML5
        return;
      }

      Swal.fire({
        title: "¡Compra Realizada Exitosamente!",
        text: "Gracias por tu compra. Recibirás un correo de confirmación.",
        icon: "success",
        showCancelButton: true, // Muestra el botón de cancelar
        confirmButtonColor: "#28a745", // Color verde para "Confirmar"
        cancelButtonColor: "#007bff", // Color azul para "Volver al Inicio"
        confirmButtonText: "Ver Recibo",
        cancelButtonText: "Volver al Inicio",
      }).then((result) => {
        if (result.dismiss === Swal.DismissReason.cancel) {
          // Si el usuario hace clic en "Volver al Inicio" o cancela
          window.location.href = '{{ url_for("index") }}';
        } else if (result.isConfirmed) {
          // Si el usuario hace clic en "Ver Recibo", redirigir a la nueva ruta
          window.location.href = '{{ url_for("recibo") }}';
        }
      });
    });
</script>
{% endblock %}
