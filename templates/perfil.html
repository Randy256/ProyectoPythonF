{% extends 'baseadmin.html' %}
{% block title %} PERFIL {% endblock %}

{% block body %}
<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
    <div
        style="width:70%; height:70px; border-radius:8px; background:linear-gradient(120deg, #3b5d3b 0%, #a8d5ba 100%); box-shadow:0 2px 8px #bbb;">
        <button id="abrirModal"
            style="padding:10px 25px; border:2px solid #218838; background:#fff; color:#218838; border-radius:7px; font-size:18px; font-weight:500; box-shadow:0 2px 8px #eee; cursor:pointer;">
            Agregar Usuario
        </button>
    </div>
</div>

<h1 style="text-align:center; font-size:2.7rem; font-weight:700; margin-bottom:30px;">Lista de Usuarios</h1>

<table style="width:100%; border-collapse:collapse; background:#fff; box-shadow:0 2px 8px #eee;">
    <thead>
        <tr style="background:#23272b; color:#fff;">
            <th style="padding:10px;">NÂº</th>
            <th style="padding:10px;">Nombre</th>
            <th style="padding:10px;">Correo</th>
            <th style="padding:10px;">Password</th>
            <th style="padding:10px;">Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% if usuarios %}
        {% for usuario in usuarios %}
        <tr style="text-align:center; {{ ' background:#f9f9f9;' if loop.index0 % 2 == 0 else '' }}">
            <td>{{ loop.index }}</td>
            <td>{{ usuario.nombre }}</td>
            <td>{{ usuario.correo }}</td>
            <td>{{ usuario.password }}</td>
            <td>
                <button
                    style="background:#218838; color:#fff; border:none; padding:7px 18px; border-radius:5px; margin-right:7px; font-size:16px; cursor:pointer;">Editar</button>
                <button
                    style="background:#dc3545; color:#fff; border:none; padding:7px 18px; border-radius:5px; font-size:16px; cursor:pointer;">Eliminar</button>
            </td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td colspan="5" style="text-align:center;">No hay usuarios registrados.</td>
        </tr>
        {% endif %}
    </tbody>
</table>

<!-- Modal -->
<div id="modalUsuario"
    style="display:none; position:fixed; z-index:1000; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3);">
    <div
        style="background:#fff; width:350px; margin:100px auto; padding:30px 25px 20px 25px; border-radius:10px; box-shadow:0 4px 24px #3333; position:relative;">
        <span id="cerrarModal"
            style="position:absolute; top:10px; right:18px; font-size:22px; cursor:pointer;">&times;</span>
        <h2 style="text-align:center; margin-bottom:18px;">Agregar Usuario</h2>
        <form method="POST" action="{{ url_for('agregar_usuario') }}">
            <div style="margin-bottom:12px;">
                <label>Nombre:</label>
                <input type="text" name="nombre" required
                    style="width:100%; padding:7px; border-radius:5px; border:1px solid #ccc;">
            </div>
            <div style="margin-bottom:12px;">
                <label>Correo:</label>
                <input type="email" name="correo" required
                    style="width:100%; padding:7px; border-radius:5px; border:1px solid #ccc;">
            </div>
            <div style="margin-bottom:18px;">
                <label>Password:</label>
                <input type="text" name="password" required
                    style="width:100%; padding:7px; border-radius:5px; border:1px solid #ccc;">
            </div>
            <button type="submit"
                style="width:100%; background:#218838; color:#fff; border:none; padding:10px; border-radius:6px; font-size:17px; cursor:pointer;">Guardar</button>
        </form>
    </div>
</div>

<script>
    document.getElementById('abrirModal').onclick = function () {
        document.getElementById('modalUsuario').style.display = 'block';
    };
    document.getElementById('cerrarModal').onclick = function () {
        document.getElementById('modalUsuario').style.display = 'none';
    };
    window.onclick = function (event) {
        var modal = document.getElementById('modalUsuario');
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
{% endblock %}